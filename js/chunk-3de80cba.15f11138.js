(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3de80cba"],{"1f14":function(e,t,a){"use strict";a.r(t);a("27f1");var n=a("1c96"),c=a("7a23"),l=a("3de1"),r=a("6be8"),s=a("238b"),o=a("6779"),i=a("c030"),d=a("83a8"),u=a("bae1");class p{constructor(e,t,a=u["b"].PopConfigAddress,n=d){this.provider=e;const c=e.getSigner(t).connectUnchecked();this.contract=new i["a"].Contract(a,n,c),console.log("pool config contract:",a)}async setRatePercent(e){return this.contract.setRatePercent(e)}async ratePercent(){return this.contract.ratePercent()}}const b={class:"container max-w-26rem px-15px mx-auto pb-2rem community"},m=Object(c["createElementVNode"])("div",{class:"font-bold text-center mb-3 text-primaryColor"},"-- 配置信息 --",-1),y={class:"mb-3"},O={class:"mb-3"},j={class:"mb-3"},v={class:"mb-3"},w=Object(c["createElementVNode"])("div",{class:"font-bold text-center mb-3 text-primaryColor"},"-- 矿池配置 --",-1),V=Object(c["createElementVNode"])("div",null,"设置机枪池比例",-1),f={class:"border-1 border-primaryColor py-10px rounded-full"},x={class:"text-center mt-2"},N=Object(c["createElementVNode"])("div",{class:"mt-3"},"设置机枪池比例开关",-1),E=Object(c["createTextVNode"])("开启"),g=Object(c["createTextVNode"])("关闭"),h={class:"text-center mt-2"},P=Object(c["createElementVNode"])("div",{class:"w-full h-2px my-2rem"},null,-1),T=Object(c["createElementVNode"])("div",{class:"mt-3"},"设置铸币比例",-1),k={class:"border-1 border-primaryColor py-10px rounded-full"},C={class:"text-center mt-2"},D=Object(c["createElementVNode"])("div",{class:"mt-3"},"设置铸币比例开关",-1),M=Object(c["createTextVNode"])("开启"),_=Object(c["createTextVNode"])("关闭"),J={class:"text-center mt-2"},U=Object(c["createElementVNode"])("div",{class:"w-full h-2px my-2rem"},null,-1),B=Object(c["createElementVNode"])("div",{class:"mt-3"},"设置最大持币数量",-1),Q={class:"border-1 border-primaryColor py-10px rounded-full"},S=Object(c["createElementVNode"])("div",{class:"w-full h-2px my-2rem"},null,-1),R=Object(c["createElementVNode"])("div",{class:"mt-3"},"设置每日收益率",-1),A={class:"border-1 border-primaryColor py-10px rounded-full"},L=Object(c["createElementVNode"])("div",{class:"text-red-500"},[Object(c["createTextVNode"])("* 请输入整数"),Object(c["createElementVNode"])("br"),Object(c["createTextVNode"])(" 例：1% 请输入10， 2% 请输入20， 3% 请输入30 ， 最大不能超过50")],-1);var I={__name:"MiningConfig",setup(e){const t=Object(c["inject"])("chainInfo"),{miningContract:a,getConfigData:i}=Object(s["a"])(),d=Object(c["reactive"])({popJQPoolPercent:"",popBankPercent:""}),u=async()=>{const e=await a.value.getPopJQPoolPercent();console.log(e),d.popJQPoolPercent=e.popJQPoolPercent,d.popBankPercent=e.popBankPercent},I=Object(c["reactive"])({value:"",status:!0}),$=async e=>{if(0!==e||Object(l["a"])(I.value))try{let t=null;0===e&&(t=await a.value.setPopJQPoolPercent(I.value)),1===e&&(t=await a.value.setPopJQPoolEnable(I.status)),Object(n["a"])("处理中..."),await t.wait(),Object(n["a"])("已设置"),await u()}catch(t){console.log(t),Object(n["a"])(t.data||t.message||t)}},q=Object(c["reactive"])({value:"",status:!0}),z=async e=>{if(0!==e||Object(l["a"])(q.value))try{let t=null;0===e&&(t=await a.value.setPopBankPercent(q.value)),1===e&&(t=await a.value.setPopBankEnable(q.status)),Object(n["a"])("处理中..."),await t.wait(),Object(n["a"])("已设置"),await u()}catch(t){console.log(t),Object(n["a"])(t.data||t.message||t)}},F=Object(c["reactive"])({getValue:"",setValue:""}),G=async()=>{if(Object(l["a"])(F.setValue))try{const e=await a.value.setPopRewardMax(o["utils"].parseUnits(F.setValue.toString(),18));Object(n["a"])("处理中..."),await e.wait(),Object(n["a"])("已设置"),await H()}catch(e){console.log(e),Object(n["a"])(e.data||e.message||e)}},H=async()=>{const e=await a.value.popRewardMax();F.getValue=o["utils"].formatUnits(e,18)},K=Object(c["ref"])(null),W=Object(c["reactive"])({getValue:"",setValue:""}),X=async()=>{if(Object(l["a"])(W.setValue))try{const e=await K.value.setRatePercent(W.setValue);Object(n["a"])("处理中..."),await e.wait(),Object(n["a"])("已设置"),await Y()}catch(e){console.log(e),Object(n["a"])(e.data||e.message||e)}},Y=async()=>{W.getValue=await K.value.ratePercent()},Z=async()=>{K.value=new p(t.provider,t.account),await i(),await u(),await H(),await Y()};return Object(c["watch"])([()=>t.isActive,()=>t.isLogin],()=>{t.isActive&&t.isLogin&&Z()},{immediate:!0}),(e,t)=>{const a=Object(c["resolveComponent"])("van-radio"),n=Object(c["resolveComponent"])("van-radio-group");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",b,[Object(c["createElementVNode"])("div",{class:"text-primaryColor",onClick:t[0]||(t[0]=t=>e.$router.back())},"<<返回"),m,Object(c["createElementVNode"])("div",y,"机枪池比例: "+Object(c["toDisplayString"])(Object(c["unref"])(r["a"])(d.popJQPoolPercent/10,0))+"%",1),Object(c["createElementVNode"])("div",O,"铸币比例: "+Object(c["toDisplayString"])(Object(c["unref"])(r["a"])(d.popBankPercent/10,0))+"%",1),Object(c["createElementVNode"])("div",j,"最大持币数量: "+Object(c["toDisplayString"])(Object(c["unref"])(r["a"])(F.getValue)),1),Object(c["createElementVNode"])("div",v,"每日收益率: "+Object(c["toDisplayString"])(W.getValue)+"%",1),w,V,Object(c["createElementVNode"])("div",f,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"bg-transparent w-full px-4px",type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>I.value=e)},null,512),[[c["vModelText"],I.value]])]),Object(c["createElementVNode"])("div",x,[Object(c["createElementVNode"])("button",{class:"primary-btn h-2rem w-10rem text-black font-bold rounded-full",onClick:t[2]||(t[2]=e=>$(0))},"确认设置")]),N,Object(c["createVNode"])(n,{modelValue:I.status,"onUpdate:modelValue":t[3]||(t[3]=e=>I.status=e),class:"flex"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{class:"flex-1",name:!0},{default:Object(c["withCtx"])(()=>[E]),_:1}),Object(c["createVNode"])(a,{class:"flex-1",name:!1},{default:Object(c["withCtx"])(()=>[g]),_:1})]),_:1},8,["modelValue"]),Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("button",{class:"primary-btn h-2rem w-10rem text-black font-bold rounded-full",onClick:t[4]||(t[4]=e=>$(1))},"确认设置")]),P,T,Object(c["createElementVNode"])("div",k,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"bg-transparent w-full px-4px",type:"number","onUpdate:modelValue":t[5]||(t[5]=e=>q.value=e)},null,512),[[c["vModelText"],q.value]])]),Object(c["createElementVNode"])("div",C,[Object(c["createElementVNode"])("button",{class:"primary-btn h-2rem w-10rem text-black font-bold rounded-full",onClick:t[6]||(t[6]=e=>z(0))},"确认设置")]),D,Object(c["createVNode"])(n,{modelValue:q.status,"onUpdate:modelValue":t[7]||(t[7]=e=>q.status=e),class:"flex"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{class:"flex-1",name:!0},{default:Object(c["withCtx"])(()=>[M]),_:1}),Object(c["createVNode"])(a,{class:"flex-1",name:!1},{default:Object(c["withCtx"])(()=>[_]),_:1})]),_:1},8,["modelValue"]),Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("button",{class:"primary-btn h-2rem w-10rem text-black font-bold rounded-full",onClick:t[8]||(t[8]=e=>z(1))},"确认设置")]),U,B,Object(c["createElementVNode"])("div",Q,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"bg-transparent w-full px-4px",type:"number","onUpdate:modelValue":t[9]||(t[9]=e=>F.setValue=e)},null,512),[[c["vModelText"],F.setValue]])]),Object(c["createElementVNode"])("div",{class:"text-center mt-2"},[Object(c["createElementVNode"])("button",{class:"primary-btn h-2rem w-10rem text-black font-bold rounded-full",onClick:G},"确认设置")]),S,R,Object(c["createElementVNode"])("div",A,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"bg-transparent w-full px-4px",type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>W.setValue=e)},null,512),[[c["vModelText"],W.setValue]])]),L,Object(c["createElementVNode"])("div",{class:"text-center mt-2"},[Object(c["createElementVNode"])("button",{class:"primary-btn h-2rem w-10rem text-black font-bold rounded-full",onClick:X},"确认设置")])])}}};const $=I;t["default"]=$},"83a8":function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousDev","type":"address"},{"indexed":true,"internalType":"address","name":"newDev","type":"address"}],"name":"DevTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"address","name":"newDev","type":"address"}],"name":"addDev","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"devs","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"dev","type":"address"}],"name":"isDev","outputs":[{"internalType":"bool","name":"","type":"bool"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ratePercent","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"rmAllDevs","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"oldDev","type":"address"}],"name":"rmDev","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"ratePercent_","type":"uint256"}],"name":"setRatePercent","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"token_","type":"address"},{"internalType":"address","name":"addr_","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]')}}]);